<!DOCTYPE html>

<html>
    <head>
        <title>Formation jQuery</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet"/>
        <link href="css/stage.css" rel="stylesheet"/>
    </head>
    <body>
        <div id="page">
            <table class="table table-bordered table-hover table-striped text-center ">
                <thead>
                    <tr>
                        <th>N°</th>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>Code Postal</th>
                        <th>Ville</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>-1</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Basuyau</td>
                        <td>Philippe</td>
                        <td>60190</td>
                        <td>Estrees Saint denis</td>
                    </tr>
               
                </tbody>
            </table>

        </div>
        <script src="js/lib/jquery-3.3.1.min.js"></script>
        <script src="js/lib/bootstrap.min.js" ></script>
        <script>
            if (typeof document.querySelector('table').closest === 'undefined')
            {
                // console.log('ok'); //--- ppour savoir si on passe dans le if
                HTMLElement.prototype.closest = function (find)
                    {
                        if(this.parentNode.nodeName.toLowerCase() === find)
                        {
                            return this.parentNode;
                        }
                        else if (this.parentNode === null)
                        {
                          return null;  
                        }
                        else
                        {
                            this.parentNode.closest(find);
                        }
                    }; //--- fin de HTMLElement
            } //--- fin du if generale
            
            //--- je repere mon tableau
            var table = document.querySelector('table');
            //--- je recupere le tr 
            var tr = table.querySelector('thead tr'); 
            //--- je cree un element dans th
            var th = document.createElement('th');
            tr.appendChild(th);
            
            //--- je vais parcouri la liste maintenant
            var listTr = table.querySelectorAll('tbody tr');
            listTr.forEach(function(tr){
                var td = document.createElement('td'); 
                 tr.appendChild(td);
                var a = document.createElement('a'); 
                //--- on gere le lien hyper text
                a.href ="#";
                a.className = "delete";
                a.title ="Supprimer la ligne";
                td.appendChild(a);
                //--- on gere l'evenement
                a.addEventListener('click', function(){
                    //--- on receupre le parent du tr ou pouvoir le supprimer
                   var parent = a.closest('tr'); //--- on recherche le tr le plus proche
                   var tbody = parent.parentNode;
                   tbody.removeChild(parent);
                });
            });
                
                    
            
            
        </script>
        <script src="js/bootstrap.menu.min.js" type="text/javascript"></script>
        <script>
           Menu.load('js/menu.json','#page','dark');
        </script>
    </body>
</html>
